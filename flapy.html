<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>CBS Jump â€“ Basis</title>
<style>
  html,body{margin:0;height:100%;background:#0b0f18;overflow:hidden}
  canvas{display:block;width:100vw;height:100vh}
  .hud{
    position:fixed;top:10px;left:50%;transform:translateX(-50%);
    color:#fff;font:700 22px system-ui,sans-serif;text-shadow:0 2px 4px rgba(0,0,0,.7)
  }
</style>
</head>
<body>
<canvas id="game"></canvas>
<div id="hud" class="hud">0 m</div>

<script>
const canvas=document.getElementById('game'),ctx=canvas.getContext('2d');
let W,H;function resize(){W=innerWidth;H=innerHeight;canvas.width=W;canvas.height=H}resize();
addEventListener('resize',resize);

const logo=new Image();logo.src='logo.png';

let player={x:W/2,y:H-120,r:30,vy:0,onGround:true};
let gravity=1600,jumpV=-650;
let camY=0,score=0;document.getElementById('hud').innerText="0 m";

let platforms=[];

function makePlatform(x,y,w=120,h=20){return{x,y,w,h};}
function spawnInitial(){
  platforms=[];
  // startplatform
  platforms.push(makePlatform(W/2,H-80));
  // omhoog
  let y=H-160;
  for(let i=0;i<20;i++){
    platforms.push(makePlatform(Math.random()*(W-140)+70,y));
    y-=100;
  }
}
spawnInitial();

function onPress(){
  if(player.onGround){
    player.vy=jumpV;
    player.onGround=false;
  }
}
addEventListener('keydown',e=>{if(e.code==="Space"){onPress();}});
addEventListener('pointerdown',onPress);

let last=performance.now();
function loop(now){
  let dt=(now-last)/1000;last=now;

  // physics
  player.vy+=gravity*dt;
  player.y+=player.vy*dt;

  // collide with platforms
  for(const p of platforms){
    if(player.x>p.x-p.w/2 && player.x<p.x+p.w/2){
      const top=p.y-10;
      if(player.vy>0 && player.y+player.r>top && player.y+player.r<top+30){
        player.y=top-player.r;
        player.vy=0;
        player.onGround=true;
      }
    }
  }

  // camera follows up
  if(player.y<camY+H*0.4){camY=player.y-H*0.4;}

  // spawn new
  let highest=Math.min(...platforms.map(p=>p.y));
  while(highest>camY-100){
    highest-=100;
    platforms.push(makePlatform(Math.random()*(W-140)+70,highest));
  }
  // remove old
  platforms=platforms.filter(p=>p.y<camY+H+50);

  // score
  let newScore=Math.max(score,Math.floor((H-80 - player.y)/10));
  if(newScore!==score){score=newScore;document.getElementById('hud').innerText=score+" m";}

  // draw
  ctx.fillStyle="#0b0f18";ctx.fillRect(0,0,W,H);
  ctx.save();ctx.translate(0,-camY);

  // platforms as golden coins
  for(const p of platforms){
    ctx.fillStyle="gold";
    ctx.beginPath();ctx.ellipse(p.x,p.y,p.w/2,10,0,0,Math.PI*2);ctx.fill();
    ctx.strokeStyle="#fff";ctx.stroke();
  }

  // player coin
  ctx.fillStyle="gold";ctx.beginPath();ctx.arc(player.x,player.y,player.r,0,Math.PI*2);ctx.fill();
  ctx.strokeStyle="#fff";ctx.lineWidth=3;ctx.stroke();
  if(logo.complete){
    ctx.save();ctx.beginPath();ctx.arc(player.x,player.y,player.r-3,0,Math.PI*2);ctx.clip();
    ctx.drawImage(logo,player.x-player.r,player.y-player.r,player.r*2,player.r*2);
    ctx.restore();
  }

  ctx.restore();

  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);
</script>
</body>
</html>
