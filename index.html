
<!DOCTYPE html>
<html lang="nl" data-lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CBS Coin â€“ Community Builds Sovereignty</title>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <!-- Confetti (optioneel, voor success) -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    :root{--bg1:#0f0f0f;--bg2:#1a1a1a;--fg:#00ffcc;--cyan:#00ffff;--panel:#111;--muted:#9aa;--border:#00ffcc}
    *{box-sizing:border-box}
    body{margin:0;font-family:'Orbitron',sans-serif;background:linear-gradient(135deg,var(--bg1),var(--bg2));color:var(--fg);display:flex;flex-direction:column;align-items:center;padding:2rem}
    nav{width:100%;background:#111;padding:1rem;text-align:center;margin-bottom:2rem;border-bottom:1px solid #0c2020}
    nav a{margin:0 .8rem;color:var(--cyan);text-decoration:none;font-weight:700}
    nav a:hover{text-decoration:underline}
    header{text-align:center;width:100%}
    h1{font-size:3rem;margin:.5rem 0 .2rem}
    h2{font-size:1.35rem;font-weight:400;color:var(--muted);margin:.4rem 0 1rem}
    .logo{margin:1rem 0;max-width:180px}
    .section{max-width:1100px;background:#111;padding:1.4rem;margin:1rem 0;border:1px solid var(--border);border-radius:12px}
    a{color:var(--cyan);text-decoration:none}
    a:hover{text-decoration:underline}
    footer{margin-top:2rem;font-size:.9rem;color:#aaa;text-align:center}
    .social-links{display:flex;justify-content:center;gap:1rem;flex-wrap:wrap;margin:1rem 0}
    .social-links a,.btn{display:inline-flex;align-items:center}
    .social-links a{padding:.5rem 1rem;background:#1a1a1a;border:1px solid var(--cyan);border-radius:6px;font-weight:700;color:var(--cyan)}
    .social-links a:hover{background:var(--cyan);color:#000}

    .toolbar{display:flex;gap:.8rem;justify-content:center;flex-wrap:wrap;margin:1rem 0}
    .btn{padding:.9rem 1.4rem;font-weight:800;border-radius:12px;border:1px solid var(--cyan);background:#141414;color:var(--cyan);cursor:pointer;transition:transform .15s ease, box-shadow .2s ease}
    .btn:hover{transform:translateY(-1px);box-shadow:0 8px 24px rgba(0,255,204,.15)}
    .btn-primary{background:var(--fg);color:#001c1a;border:none;box-shadow:0 0 10px var(--fg),0 0 40px var(--fg),0 0 80px var(--fg)}
    .btn-primary:hover{box-shadow:0 0 20px var(--cyan),0 0 60px var(--cyan),0 0 100px var(--cyan)}
    .btn[disabled]{opacity:.6;cursor:not-allowed}

    #status{min-height:1.5rem;margin-top:.6rem}
    .ok{color:#5aff86}.warn{color:#ffd166}.err{color:#ff6b6b}
    #walletAddr{font-size:.95rem;color:#9fffe3}

    .countdown{margin-top:.4rem;color:#9fffe3;font-size:.95rem}
    .closed{color:#ffd166}
  </style>
</head>
<body>
  <nav>
    <a id="navHome" href="index.html" data-i18n="navHome">Home</a>
    <a id="navRoadmap" href="roadmap.html" data-i18n="navRoadmap">Roadmap</a>
    <a id="navTokenomics" href="tokenomics.html" data-i18n="navTokenomics">Tokenomics</a>
    <a id="navLitepaper" href="litepaper.html" data-i18n="navLitepaper">Litepaper</a>
    <!-- DAO link verwijderd -->
    <a id="navContact" href="mailto:smitskecbs@gmail.com" data-i18n="navContact">Contact</a>
  </nav>

  <header>
    <img class="logo" alt="CBS Coin Logo" src="https://cyan-persistent-stork-902.mypinata.cloud/ipfs/bafybeia7qejzloll6teyt4o4orvd7bnvkg4thrfajv4rgb3fmm2odeweoa/logo.png" />
    <h1>CBS Coin</h1>
    <h2 id="subtitle" data-i18n="subtitle">Community Builds Sovereignty</h2>

    <div class="social-links">
      <a id="linkTelegram" href="https://t.me/CBS_Coin" target="_blank" rel="noreferrer" data-i18n="telegram">Telegram</a>
      <a id="linkX" href="https://twitter.com/CBS_Coin" target="_blank" rel="noreferrer" data-i18n="xTwitter">X (Twitter)</a>
      <button id="langBtn" class="btn" data-i18n="langSwitch">ğŸŒ English</button>
    </div>
  </header>

  <section class="section" style="text-align:center">
    <h2 id="buyTitle" data-i18n="buyTitle">ğŸ’° Koop CBS â€“ Actie</h2>
    <p id="buyIntro" data-i18n="buyIntro" data-i18n-html><b>0.020 SOL</b> â†’ <b>25.000 CBS</b> (direct via onze site).</p>

    <div class="toolbar">
      <button id="connectBtn" class="btn" data-i18n="connect">ğŸ”Œ Connect Wallet</button>
      <button id="disconnectBtn" class="btn" style="display:none" data-i18n="disconnect">ğŸ”’ Disconnect</button>
      <span id="walletAddr"></span>
    </div>

    <!-- Koop-knoppen verwijderd -->
    <p id="status"></p>
  </section>

  <section class="section" style="text-align:center">
    <h2 id="airdropTitle" data-i18n="airdropTitle">ğŸ Airdrop â€“ Aanvraag</h2>
    <p id="airdropIntro" data-i18n="airdropIntro" data-i18n-html>
      Vraag de airdrop aan via het formulier. <br><em>Inschrijving stopt op 1 september 2025.</em>
    </p>
    <div class="toolbar">
      <a id="airdropBtn" class="btn btn-primary" target="_blank" rel="noreferrer"
         href="https://docs.google.com/forms/d/e/1FAIpQLSfIPCTbVFXfGqESxofzjzUwO60hu89DId5T-EmV6ax6hOplSg/viewform?usp=sharing&ouid=105309397487176943057"
         data-i18n="airdropButton">ğŸ Aanvraag Airdrop</a>
    </div>
    <div id="airdropCountdown" class="countdown"></div>
  </section>

  <section class="section">
    <h3 id="tokenInfoTitle" data-i18n="tokenInfoTitle">ğŸ“¦ Token Info</h3>
    <ul>
      <li><strong data-i18n="tokenNameLabel">Tokennaam:</strong> <span data-i18n="tokenName">CBS Coin</span></li>
      <li><strong data-i18n="symbolLabel">Symbool:</strong> CBS</li>
      <li><strong data-i18n="supplyLabel">Totale supply:</strong> 100.000.000</li>
      <li><strong data-i18n="mintAuthLabel">Mint authority:</strong> <em data-i18n="disabled">uitgeschakeld</em></li>
      <li><strong data-i18n="freezeAuthLabel">Freeze authority:</strong> <em data-i18n="disabled">uitgeschakeld</em></li>
      <li><strong data-i18n="explorerLabel">Explorer:</strong>
        <a id="explorerLink" href="https://solscan.io/token/B9z8cEWFmc7LvQtjKsaLoKqW5MJmGRCWqs1DPKupCfkk" target="_blank" rel="noreferrer" data-i18n="viewOnSolscan">Bekijk op Solscan</a>
      </li>
    </ul>
  </section>

  <section class="section">
    <h3 id="roadmapTitle" data-i18n="roadmapTitle">ğŸ“„ Whitepaper & Roadmap</h3>
    <p id="roadmapText" data-i18n="roadmapText" data-i18n-html>
      Bekijk onze visie en plannen in de <a href="litepaper.html" target="_blank" rel="noreferrer">litepaper</a>.
      De roadmap bevat o.a. liquidity pools, DAO integratie en tokenverificatie op grote platforms.
    </p>
  </section>

  <footer>
    Â© 2025 CBS Coin â€“ <span data-i18n="footerTag">Sovereignty through community.</span>
    <div class="social-links" style="justify-content:center;margin-top:.6rem">
      <a href="https://t.me/CBS_Coin" target="_blank" rel="noreferrer" data-i18n="telegram">Telegram</a>
      <a href="https://twitter.com/CBS_Coin" target="_blank" rel="noreferrer" data-i18n="xTwitter">X (Twitter)</a>
    </div>
  </footer>

  <script type="module">
    // ===== Config (mag blijven staan, wordt niet meer gebruikt voor kopen) =====
    const CREATOR_WALLET = "76SjWWFoJ1NQEWXVWbbqYR8112FAEyWGQT1PS1DeLmEg";
    const CBS_MINT       = "B9z8cEWFmc7LvQtjKsaLoKqW5MJmGRCWqs1DPKupCfkk";
    const PRICE_SOL      = 0.020;
    const CBS_PER_BUY    = 25000;
    const HELIUS_RPC     = "https://mainnet.helius-rpc.com/?api-key=dee593c7-e01e-42da-9419-bcf7b585b67e";
    const FULFILL_ENDPOINT = "https://cbs-coin.vercel.app/api/koop-cbs";
    const AIRDROP_DEADLINE_ISO = "2025-09-01T00:00:00Z";

    // ===== i18n (ongewijzigd) =====
    const i18n = { /* ... exact dezelfde i18n als in jouw bestand ... */ };

    let currentLang = localStorage.getItem("cbs_lang") || "nl";
    document.documentElement.setAttribute("lang", currentLang);
    document.documentElement.setAttribute("data-lang", currentLang);

    const $ = (id)=>document.getElementById(id);
    let lastWalletPub = "";

    function fmtAmount(n){
      const locale = currentLang === "nl" ? "nl-NL" : "en-US";
      return new Intl.NumberFormat(locale, { maximumFractionDigits: 0 }).format(n);
    }
    function t(key, params={}){
      const dict = i18n[currentLang] || i18n.nl;
      let str = dict[key] || key;
      const merged = { amount: fmtAmount(CBS_PER_BUY), price: PRICE_SOL.toFixed(3), ...params };
      return str.replace(/\{(\w+)\}/g, (_,k)=> (merged[k] ?? `{${k}}`));
    }

    function applyI18n(){
      document.querySelectorAll("[data-i18n]").forEach(el=>{
        const key = el.getAttribute("data-i18n");
        const html = el.hasAttribute("data-i18n-html");
        const content = t(key);
        if (html) el.innerHTML = content; else el.textContent = content;
      });
      if (lastWalletPub){
        $("walletAddr").textContent = `${t("walletLabel")} ${shortKey(lastWalletPub)}`;
      }
    }

    // taal-knop
    $("langBtn").addEventListener("click", () => {
      currentLang = currentLang === "nl" ? "en" : "nl";
      localStorage.setItem("cbs_lang", currentLang);
      document.documentElement.setAttribute("lang", currentLang);
      document.documentElement.setAttribute("data-lang", currentLang);
      applyI18n();
    });

    // ===== Wallet helpers =====
    const connectBtn    = $("connectBtn");
    const disconnectBtn = $("disconnectBtn");
    const walletAddrEl  = $("walletAddr");
    const statusEl      = $("status");
    const airdropBtn    = $("airdropBtn");
    const airdropCountdown = $("airdropCountdown");

    const setOK  = (h)=>{ statusEl.className="ok";  statusEl.innerHTML=h; };
    const setERR = (h)=>{ statusEl.className="err"; statusEl.innerHTML=h; };
    const setWARN= (h)=>{ statusEl.className="warn";statusEl.innerHTML=h; };

    function getProvider(){ if (window.solana?.isPhantom) return window.solana; if (window.phantom?.solana?.isPhantom) return window.phantom.solana; return null; }
    function shortKey(pk){ const s = pk?.toString()||""; return s.length>10 ? s.slice(0,4)+"â€¦"+s.slice(-4) : s; }
    function setConnected(pk){ lastWalletPub = pk; walletAddrEl.textContent = t("walletLabel")+" "+shortKey(pk); connectBtn.style.display="none"; disconnectBtn.style.display="inline-block"; }
    function setDisconnected(){ lastWalletPub = ""; walletAddrEl.textContent = ""; connectBtn.style.display="inline-block"; disconnectBtn.style.display="none"; }

    async function connectWallet(){ const p=getProvider(); if(!p){ alert(t("notFoundPhantom")); return null; }
      try{ const res=await p.connect({onlyIfTrusted:false}); const pub=(res.publicKey||p.publicKey).toString(); setConnected(pub); return pub; }catch{ return null; } }
    async function disconnectWallet(){ const p=getProvider(); try{ await p?.disconnect?.(); }catch{} setDisconnected(); }
    connectBtn.addEventListener("click", connectWallet);
    disconnectBtn.addEventListener("click", disconnectWallet);

    // Init
    window.addEventListener("load", async () => {
      applyI18n();
      const p = getProvider();
      if (p){ try{ const res=await p.connect({onlyIfTrusted:true}); if (res?.publicKey || p.publicKey) setConnected((res.publicKey||p.publicKey).toString()); }catch{} }
      initAirdropTimer();
    });

    // (web3 import mag blijven, wordt niet meer gebruikt voor kopen)
    // import { Connection, PublicKey, SystemProgram, Transaction, LAMPORTS_PER_SOL } from "https://esm.sh/@solana/web3.js@1.95.3";

    function initAirdropTimer(){
      const end=new Date(AIRDROP_DEADLINE_ISO).getTime();
      function tick(){
        const now=Date.now();
        if (now>=end){
          airdropBtn.setAttribute("disabled","disabled");
          airdropBtn.textContent = currentLang==="nl" ? "ğŸ Inschrijving gesloten" : "ğŸ Registration closed";
          airdropBtn.removeAttribute("href");
          airdropCountdown.classList.add("closed");
          airdropCountdown.textContent = currentLang==="nl" ? "De airdrop-inschrijving is gesloten." : "Airdrop registration is closed.";
          return;
        }
        const diff=end-now, d=Math.floor(diff/86400000), h=Math.floor(diff%86400000/3600000), m=Math.floor(diff%3600000/60000), s=Math.floor(diff%60000/1000);
        const txt = currentLang==="nl"
          ? `Inschrijving sluit over ${d}d ${h}u ${m}m ${s}s`
          : `Registration closes in ${d}d ${h}h ${m}m ${s}s`;
        airdropCountdown.textContent = txt;
        requestAnimationFrame(()=>setTimeout(tick,1000));
      }
      tick();
    }
  </script>
</body>
</html>
