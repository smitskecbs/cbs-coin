<!DOCTYPE html>
<html lang="nl" data-lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CBS Coin – Community Builds Sovereignty</title>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <!-- Confetti (optioneel, voor success) -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    :root{
      --bg1:#0f0f0f;--bg2:#1a1a1a;--fg:#00ffcc;--cyan:#00ffff;
      --panel:#111;--muted:#9aa;--border:#00ffcc;
    }
    *{box-sizing:border-box}
    body{
      margin:0;font-family:'Orbitron',sans-serif;
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      color:var(--fg);display:flex;flex-direction:column;align-items:center;padding:2rem
    }
    nav{width:100%;background:#111;padding:1rem;text-align:center;margin-bottom:2rem;border-bottom:1px solid #0c2020}
    nav a{margin:0 .8rem;color:var(--cyan);text-decoration:none;font-weight:700}
    nav a:hover{text-decoration:underline}
    header{text-align:center;width:100%}
    h1{font-size:3rem;margin:.5rem 0 .2rem}
    h2{font-size:1.35rem;font-weight:400;color:var(--muted);margin:.4rem 0 1rem}
    .logo{margin:1rem 0;max-width:180px}
    .section{max-width:1100px;background:#111;padding:1.4rem;margin:1rem 0;border:1px solid var(--border);border-radius:12px}
    a{color:var(--cyan);text-decoration:none}
    a:hover{text-decoration:underline}
    footer{margin-top:2rem;font-size:.9rem;color:#aaa;text-align:center}
    .social-links{display:flex;justify-content:center;gap:1rem;flex-wrap:wrap;margin:1rem 0}
    .social-links a{display:inline-flex;align-items:center;padding:.5rem 1rem;background:#1a1a1a;border:1px solid var(--cyan);border-radius:6px;font-weight:700;color:var(--cyan)}
    .social-links a:hover{background:var(--cyan);color:#000}

    /* Knoppen */
    .toolbar{display:flex;gap:.8rem;justify-content:center;flex-wrap:wrap;margin:1rem 0}
    .btn{
      padding:.9rem 1.4rem;font-weight:800;border-radius:12px;border:1px solid var(--cyan);
      background:#141414;color:var(--cyan);cursor:pointer;
      transition:transform .15s ease, box-shadow .2s ease;
    }
    .btn:hover{transform:translateY(-1px);box-shadow:0 8px 24px rgba(0,255,204,.15)}
    .btn-primary{
      background:var(--fg);color:#001c1a;border:none;
      box-shadow:0 0 10px var(--fg),0 0 40px var(--fg),0 0 80px var(--fg);
    }
    .btn-primary:hover{box-shadow:0 0 20px var(--cyan),0 0 60px var(--cyan),0 0 100px var(--cyan)}
    .btn[disabled]{opacity:.6;cursor:not-allowed}

    /* Kleine taal-knop */
    #langBtn{position:relative}
    #walletAddr{font-size:.95rem;color:#9fffe3}

    /* Status */
    #status{min-height:1.5rem;margin-top:.6rem}
    .ok{color:#5aff86} .warn{color:#ffd166} .err{color:#ff6b6b}

    /* Airdrop teller */
    .countdown{margin-top:.4rem;color:#9fffe3;font-size:.95rem}
    .closed{color:#ffd166}
  </style>
</head>
<body>
  <nav>
    <a id="navHome" href="index.html" data-i18n="navHome">Home</a>
    <a id="navRoadmap" href="roadmap.html" data-i18n="navRoadmap">Roadmap</a>
    <a id="navTokenomics" href="tokenomics.html" data-i18n="navTokenomics">Tokenomics</a>
    <a id="navLitepaper" href="litepaper.html" data-i18n="navLitepaper">Litepaper</a>
    <a id="navDao" href="dao-mainnet/dao.html" data-i18n="navDao">DAO</a>
    <a id="navContact" href="mailto:smitskecbs@gmail.com" data-i18n="navContact">Contact</a>
  </nav>

  <header>
    <img class="logo" alt="CBS Coin Logo"
         src="https://cyan-persistent-stork-902.mypinata.cloud/ipfs/bafybeia7qejzloll6teyt4o4orvd7bnvkg4thrfajv4rgb3fmm2odeweoa/logo.png" />
    <h1>CBS Coin</h1>
    <h2 id="subtitle" data-i18n="subtitle">Community Builds Sovereignty</h2>

    <div class="social-links">
      <a id="linkTelegram" href="https://t.me/CBS_Coin" target="_blank" rel="noreferrer" data-i18n="telegram">Telegram</a>
      <a id="linkX" href="https://twitter.com/CBS_Coin" target="_blank" rel="noreferrer" data-i18n="xTwitter">X (Twitter)</a>
      <button id="langBtn" class="btn" data-i18n="langSwitch">🌐 English</button>
    </div>
  </header>

  <!-- KOOP CBS (on-site deal) -->
  <section class="section" style="text-align:center">
    <h2 id="buyTitle" data-i18n="buyTitle">💰 Koop CBS – Actie</h2>
    <p id="buyIntro" data-i18n="buyIntro"><b>0.020 SOL</b> → <b>25.000 CBS</b> (direct via onze site).</p>

    <!-- Wallet in het koopvak -->
    <div class="toolbar">
      <button id="connectBtn" class="btn" data-i18n="connect">🔌 Connect Wallet</button>
      <button id="disconnectBtn" class="btn" style="display:none" data-i18n="disconnect">🔒 Disconnect</button>
      <span id="walletAddr"></span>
    </div>

    <div class="toolbar">
      <button id="buyBtn" class="btn btn-primary" data-i18n="buyButton">💳 Koop 25.000 CBS (0.020 SOL)</button>
      <button id="retryBtn" class="btn" style="display:none" data-i18n="retry">🔁 Herprobeer uitbetaling</button>
    </div>

    <p id="status"></p>
  </section>

  <!-- AIRDROP (via Google Form) -->
  <section class="section" style="text-align:center">
    <h2 id="airdropTitle" data-i18n="airdropTitle">🎁 Airdrop – Aanvraag</h2>
    <p id="airdropIntro" data-i18n="airdropIntro">
      Vraag de airdrop aan via het formulier. <br><em>Inschrijving stopt op 1 september 2025.</em>
    </p>
    <div class="toolbar">
      <a id="airdropBtn" class="btn btn-primary" target="_blank" rel="noreferrer"
         href="https://docs.google.com/forms/d/e/1FAIpQLSfIPCTbVFXfGqESxofzjzUwO60hu89DId5T-EmV6ax6hOplSg/viewform?usp=sharing&ouid=105309397487176943057"
         data-i18n="airdropButton">
         🎁 Aanvraag Airdrop
      </a>
    </div>
    <div id="airdropCountdown" class="countdown"></div>
  </section>

  <!-- INFO -->
  <section class="section">
    <h3 id="tokenInfoTitle" data-i18n="tokenInfoTitle">📦 Token Info</h3>
    <ul>
      <li><strong data-i18n="tokenNameLabel">Tokennaam:</strong> <span data-i18n="tokenName">CBS Coin</span></li>
      <li><strong data-i18n="symbolLabel">Symbool:</strong> CBS</li>
      <li><strong data-i18n="supplyLabel">Totale supply:</strong> 100.000.000</li>
      <li><strong data-i18n="mintAuthLabel">Mint authority:</strong> <em data-i18n="disabled">uitgeschakeld</em></li>
      <li><strong data-i18n="freezeAuthLabel">Freeze authority:</strong> <em data-i18n="disabled">uitgeschakeld</em></li>
      <li><strong data-i18n="explorerLabel">Explorer:</strong>
        <a id="explorerLink" href="https://solscan.io/token/B9z8cEWFmc7LvQtjKsaLoKqW5MJmGRCWqs1DPKupCfkk" target="_blank" rel="noreferrer" data-i18n="viewOnSolscan">
          Bekijk op Solscan
        </a>
      </li>
    </ul>
  </section>

  <section class="section">
    <h3 id="roadmapTitle" data-i18n="roadmapTitle">📄 Whitepaper & Roadmap</h3>
    <p id="roadmapText" data-i18n="roadmapText">
      Bekijk onze visie en plannen in de <a href="litepaper.html" target="_blank" rel="noreferrer">litepaper</a>.
      De roadmap bevat o.a. liquidity pools, DAO integratie en tokenverificatie op grote platforms.
    </p>
  </section>

  <footer>
    © 2025 CBS Coin – <span data-i18n="footerTag">Sovereignty through community.</span>
    <div class="social-links" style="justify-content:center;margin-top:.6rem">
      <a href="https://t.me/CBS_Coin" target="_blank" rel="noreferrer" data-i18n="telegram">Telegram</a>
      <a href="https://twitter.com/CBS_Coin" target="_blank" rel="noreferrer" data-i18n="xTwitter">X (Twitter)</a>
    </div>
  </footer>

  <!-- Web3.js (ESM) -->
  <script type="module">
    // ===== Config =====
    const CREATOR_WALLET = "76SjWWFoJ1NQEWXVWbbqYR8112FAEyWGQT1PS1DeLmEg"; // ontvanger SOL
    const CBS_MINT       = "B9z8cEWFmc7LvQtjKsaLoKqW5MJmGRCWqs1DPKupCfkk";
    const PRICE_SOL      = 0.020;        // 0.020 SOL
    const CBS_PER_BUY    = 25000;        // 25.000 / 25,000 CBS
    const HELIUS_RPC     = "https://mainnet.helius-rpc.com/?api-key=dee593c7-e01e-42da-9419-bcf7b585b67e";

    // Backend die CBS uitkeert na betaling:
    const FULFILL_ENDPOINT = "https://cbs-coin.vercel.app/api/koop-cbs";

    // Airdrop deadline (na deze datum wordt de knop uitgeschakeld)
    const AIRDROP_DEADLINE_ISO = "2025-09-01T00:00:00Z";

    // ===== i18n woordenboek =====
    const i18n = {
      nl: {
        navHome:"Home", navRoadmap:"Roadmap", navTokenomics:"Tokenomics", navLitepaper:"Litepaper", navDao:"DAO", navContact:"Contact",
        subtitle:"Community Builds Sovereignty",
        telegram:"Telegram", xTwitter:"X (Twitter)",
        langSwitch:"🌐 English",
        buyTitle:"💰 Koop CBS – Actie",
        buyIntro:"<b>{price} SOL</b> → <b>{amount} CBS</b> (direct via onze site).",
        connect:"🔌 Connect Wallet", disconnect:"🔒 Disconnect",
        walletLabel:"Wallet:",
        buyButton:"💳 Koop {amount} CBS ({price} SOL)",
        retry:"🔁 Herprobeer uitbetaling",
        airdropTitle:"🎁 Airdrop – Aanvraag",
        airdropIntro:"Vraag de airdrop aan via het formulier. <br><em>Inschrijving stopt op 1 september 2025.</em>",
        airdropButton:"🎁 Aanvraag Airdrop",
        countdownLeft:"Inschrijving sluit over {d}d {h}u {m}m {s}s",
        airdropClosedBtn:"🎁 Inschrijving gesloten",
        airdropClosedText:"De airdrop-inschrijving is gesloten.",
        tokenInfoTitle:"📦 Token Info",
        tokenNameLabel:"Tokennaam:", tokenName:"CBS Coin", symbolLabel:"Symbool:", supplyLabel:"Totale supply:",
        mintAuthLabel:"Mint authority:", freezeAuthLabel:"Freeze authority:", disabled:"uitgeschakeld",
        explorerLabel:"Explorer:", viewOnSolscan:"Bekijk op Solscan",
        roadmapTitle:"📄 Whitepaper & Roadmap",
        roadmapText:'Bekijk onze visie en plannen in de <a href="litepaper.html" target="_blank" rel="noreferrer">litepaper</a>. De roadmap bevat o.a. liquidity pools, DAO integratie en tokenverificatie op grote platforms.',
        footerTag:"Sovereignty through community.",
        // Status/flow
        notFoundPhantom:"❌ Phantom wallet niet gevonden. Installeer Phantom.",
        pleaseWait:"Even geduld… je kunt over een paar minuten opnieuw kopen.",
        preparing:"⏳ Voorbereiden van betaling…",
        sentWaiting:'⏳ Betaling verstuurd, wachten op confirm… {link}',
        viewOnSolscan:"Bekijk op Solscan",
        startingPayout:"⏳ Uitbetaling {amount} CBS wordt gestart…",
        successPayout:'✅ Koop geslaagd! {price} SOL ontvangen. {amount} CBS is onderweg. {link}',
        receivedButPending:'✅ Betaling ontvangen. De uitbetaling kon niet direct worden bevestigd ({error}). Je kunt zo meteen op <b>Herprobeer uitbetaling</b> klikken. Bewaar je TX: <code>{sig}</code>.',
        cancelled:"Je hebt de betaling in Phantom geannuleerd.",
        insufficient:"Onvoldoende SOL voor deze aankoop ({price} SOL + netwerkfee vereist).",

